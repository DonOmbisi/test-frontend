import{a as ot,b as at,c as rt,d as lt,e as st,f as mt,g as dt,h as pt,i as ct,j as ut,k as ft,l as Ct,m as _t,n as gt,o as xt}from"./chunk-N2VLMGBA.js";import{c as T}from"./chunk-QDJB5KD3.js";import{a as J,b as K,c as Q}from"./chunk-ZKA7IT4P.js";import{A as q,B as Y,C as Z,R as tt,S as et,a as D,d as N,e as O,h as y,j as F,k as z,n as k,o as B,p as $,q as L,r as H,s as V,t as U,u as G,v as j,w as A}from"./chunk-XURN2UGX.js";import{Ea as v,Fb as R,Ia as p,Ra as _,Sa as g,Wa as d,Xa as n,Ya as e,Za as x,_c as W,aa as E,ad as X,ba as b,bb as c,bd as nt,cb as u,cd as it,eb as P,gb as C,hb as S,jc as I,ua as l,vb as i,wb as f,ya as h,zb as w}from"./chunk-X42FMB2R.js";var ht=()=>[10,20,50,100];function St(t,a){t&1&&x(0,"mat-progress-bar",16)}function Mt(t,a){if(t&1&&(n(0,"div",17)(1,"p"),i(2),e()()),t&2){let r=S();l(2),w(" Showing ",r.currentPage*r.pageSize+1," - ",r.Math.min((r.currentPage+1)*r.pageSize,r.totalElements)," of ",r.totalElements.toLocaleString()," students ")}}function Et(t,a){t&1&&(n(0,"th",32),i(1,"Student ID"),e())}function bt(t,a){if(t&1&&(n(0,"td",33),i(1),e()),t&2){let r=a.$implicit;l(),f(r.studentId)}}function vt(t,a){t&1&&(n(0,"th",32),i(1,"First Name"),e())}function Pt(t,a){if(t&1&&(n(0,"td",33),i(1),e()),t&2){let r=a.$implicit;l(),f(r.firstName)}}function wt(t,a){t&1&&(n(0,"th",32),i(1,"Last Name"),e())}function Rt(t,a){if(t&1&&(n(0,"td",33),i(1),e()),t&2){let r=a.$implicit;l(),f(r.lastName)}}function It(t,a){t&1&&(n(0,"th",32),i(1,"Date of Birth"),e())}function Tt(t,a){if(t&1&&(n(0,"td",33),i(1),e()),t&2){let r=a.$implicit;l(),f(r.dob)}}function Dt(t,a){t&1&&(n(0,"th",32),i(1,"Class"),e())}function Nt(t,a){if(t&1&&(n(0,"td",33),i(1),e()),t&2){let r=a.$implicit;l(),f(r.className)}}function Ot(t,a){t&1&&(n(0,"th",32),i(1,"Score"),e())}function yt(t,a){if(t&1&&(n(0,"td",33),i(1),e()),t&2){let r=a.$implicit;l(),f(r.score)}}function Ft(t,a){t&1&&x(0,"tr",34)}function zt(t,a){t&1&&x(0,"tr",35)}function kt(t,a){if(t&1){let r=P();n(0,"div",18)(1,"table",20),c(2,21),p(3,Et,2,0,"th",22)(4,bt,2,1,"td",23),u(),c(5,24),p(6,vt,2,0,"th",22)(7,Pt,2,1,"td",23),u(),c(8,25),p(9,wt,2,0,"th",22)(10,Rt,2,1,"td",23),u(),c(11,26),p(12,It,2,0,"th",22)(13,Tt,2,1,"td",23),u(),c(14,27),p(15,Dt,2,0,"th",22)(16,Nt,2,1,"td",23),u(),c(17,28),p(18,Ot,2,0,"th",22)(19,yt,2,1,"td",23),u(),p(20,Ft,1,0,"tr",29)(21,zt,1,0,"tr",30),e(),n(22,"mat-paginator",31),C("page",function(m){E(r);let o=S();return b(o.onPageChange(m))}),e()()}if(t&2){let r=S();l(),d("dataSource",r.students),l(19),d("matHeaderRowDef",r.displayedColumns),l(),d("matRowDefColumns",r.displayedColumns),l(),d("length",r.totalElements)("pageSize",r.pageSize)("pageSizeOptions",R(7,ht))("pageIndex",r.currentPage)}}function Bt(t,a){t&1&&(n(0,"div",19)(1,"p"),i(2,"No students found matching the current filters."),e()())}var se=(()=>{let a=class a{constructor(s,m,o){this.fb=s,this.http=m,this.snackBar=o,this.students=[],this.displayedColumns=["studentId","firstName","lastName","dob","className","score"],this.currentPage=0,this.pageSize=20,this.totalElements=0,this.isLoading=!1,this.isExporting=!1,this.Math=Math,this.filterForm=this.fb.group({studentId:[""],className:[""]})}ngOnInit(){this.loadStudents()}applyFilters(){this.currentPage=0,this.loadStudents()}loadStudents(){this.isLoading=!0;let s={page:this.currentPage,size:this.pageSize,studentId:this.filterForm.value.studentId||void 0,className:this.filterForm.value.className||void 0},m=new URLSearchParams;m.set("page",s.page.toString()),m.set("size",s.size.toString()),s.studentId&&m.set("studentId",s.studentId.toString()),s.className&&m.set("className",s.className),this.http.get(`http://localhost:8081/api/reports/students?${m.toString()}`).subscribe({next:o=>{o.success&&(this.students=o.students,this.totalElements=o.totalElements,this.currentPage=o.currentPage,this.pageSize=o.pageSize),this.isLoading=!1},error:o=>{this.snackBar.open("Error loading students: "+(o.message||"Unknown error"),"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["error-snackbar"]}),this.isLoading=!1}})}onPageChange(s){this.currentPage=s.pageIndex,this.pageSize=s.pageSize,this.loadStudents()}exportToExcel(){this.exportData("excel")}exportToCsv(){this.exportData("csv")}exportToPdf(){this.exportData("pdf")}exportData(s){this.isExporting=!0;let m={page:this.currentPage,size:this.pageSize,studentId:this.filterForm.value.studentId||void 0,className:this.filterForm.value.className||void 0};this.http.post(`http://localhost:8081/api/reports/export/${s}`,m).subscribe({next:o=>{o.success?this.snackBar.open(`${s.toUpperCase()} report generated successfully!`,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"}):this.snackBar.open(`Error generating ${s.toUpperCase()} report: `+o.message,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["error-snackbar"]}),this.isExporting=!1},error:o=>{this.snackBar.open(`Error generating ${s.toUpperCase()} report: ${o.message||"Unknown error"}`,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["error-snackbar"]}),this.isExporting=!1}})}};a.\u0275fac=function(m){return new(m||a)(h(k),h(I),h(tt))},a.\u0275cmp=v({type:a,selectors:[["app-reports"]],decls:54,vars:8,consts:[[1,"container"],[1,"filter-section",3,"ngSubmit","formGroup"],[1,"filter-row"],["appearance","outline"],["matInput","","formControlName","studentId","placeholder","Search by Student ID"],["formControlName","className"],["value",""],["value","Class1"],["value","Class2"],["value","Class3"],["value","Class4"],["value","Class5"],["mat-raised-button","","color","primary","type","submit"],[1,"export-section"],[1,"export-buttons"],["mat-raised-button","","color","accent",3,"click","disabled"],["mode","indeterminate",1,"progress-bar"],[1,"results-summary"],[1,"table-container"],[1,"no-data"],["mat-table","",1,"student-table",3,"dataSource"],["matColumnDef","studentId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","dob"],["matColumnDef","className"],["matColumnDef","score"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(m,o){m&1&&(n(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),i(4,"Reports Module"),e(),n(5,"mat-card-subtitle"),i(6,"View, filter, and export student data"),e()(),n(7,"mat-card-content")(8,"form",1),C("ngSubmit",function(){return o.applyFilters()}),n(9,"div",2)(10,"mat-form-field",3)(11,"mat-label"),i(12,"Student ID"),e(),x(13,"input",4),e(),n(14,"mat-form-field",3)(15,"mat-label"),i(16,"Class"),e(),n(17,"mat-select",5)(18,"mat-option",6),i(19,"All Classes"),e(),n(20,"mat-option",7),i(21,"Class1"),e(),n(22,"mat-option",8),i(23,"Class2"),e(),n(24,"mat-option",9),i(25,"Class3"),e(),n(26,"mat-option",10),i(27,"Class4"),e(),n(28,"mat-option",11),i(29,"Class5"),e()()(),n(30,"button",12)(31,"mat-icon"),i(32,"search"),e(),i(33," Apply Filters "),e()()(),n(34,"div",13)(35,"h3"),i(36,"Export Options"),e(),n(37,"div",14)(38,"button",15),C("click",function(){return o.exportToExcel()}),n(39,"mat-icon"),i(40,"table_chart"),e(),i(41," Export to Excel "),e(),n(42,"button",15),C("click",function(){return o.exportToCsv()}),n(43,"mat-icon"),i(44,"description"),e(),i(45," Export to CSV "),e(),n(46,"button",15),C("click",function(){return o.exportToPdf()}),n(47,"mat-icon"),i(48,"picture_as_pdf"),e(),i(49," Export to PDF "),e()()(),_(50,St,1,0,"mat-progress-bar",16),_(51,Mt,3,3,"div",17),_(52,kt,23,8,"div",18),_(53,Bt,3,0,"div",19),e()()()),m&2&&(l(8),d("formGroup",o.filterForm),l(30),d("disabled",o.isExporting),l(4),d("disabled",o.isExporting),l(4),d("disabled",o.isExporting),l(4),g(o.isLoading||o.isExporting?50:-1),l(),g(o.totalElements>0?51:-1),l(),g(o.students.length>0?52:-1),l(),g(!o.isLoading&&o.students.length===0?53:-1))},dependencies:[B,y,D,N,O,$,F,z,j,L,V,G,U,H,J,q,A,Q,K,_t,Ct,T,X,W,ft,ot,rt,dt,lt,at,pt,st,mt,ct,ut,xt,gt,Z,Y,et,it,nt],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.filter-section[_ngcontent-%COMP%]{margin-bottom:24px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex-wrap:wrap}.filter-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:200px}.export-section[_ngcontent-%COMP%]{margin:24px 0;padding:16px;background-color:#f5f5f5;border-radius:4px}.export-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333}.export-buttons[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.progress-bar[_ngcontent-%COMP%]{margin:16px 0}.results-summary[_ngcontent-%COMP%]{margin:16px 0;text-align:center;font-weight:500}.table-container[_ngcontent-%COMP%]{margin-top:24px;overflow-x:auto}.student-table[_ngcontent-%COMP%]{width:100%}.student-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .student-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.no-data[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#666}mat-card[_ngcontent-%COMP%]{margin-bottom:24px}@media (max-width: 768px){.filter-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:auto}.export-buttons[_ngcontent-%COMP%]{flex-direction:column}}"]});let t=a;return t})();export{se as ReportsComponent};
